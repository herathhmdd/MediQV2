{% extends 'base.html' %}
{% block title %}Nurse Dashboard - MediQ Clinic{% endblock %}
{% block content %}
<h2>Nurse Dashboard</h2>
<form method="get" class="row g-3 mb-3">
    <div class="col-md-3">
        <input type="date" name="date" class="form-control" value="{{ request.args.get('date', '') }}">
    </div>
    <div class="col-md-2">
        <button type="submit" class="btn btn-primary w-100">Filter</button>
    </div>
    <div class="col-md-3">
        <a href="{{ url_for('record_list') }}" class="btn btn-secondary w-100">View Medical Records</a>
    </div>
</form>
<table class="table table-striped">
    <thead>
        <tr>
            <th>Visit ID</th>
            <th>Patient</th>
            <th>Queue #</th>
            <th>Date</th>
            <th>Status</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for visit in visits %}
        <tr>
            <td>{{ visit.visit_id }}</td>
            <td>{{ visit.patient_name }}</td>
            <td>{{ visit.queue_number }}</td>
            <td>{{ visit.visit_date if visit.visit_date else '' }}</td>
            <td>{{ visit.status }}</td>
            <td>
                <a href="{{ url_for('edit_visit', visit_id=visit.visit_id) }}" class="btn btn-primary btn-sm">Update
                    Status</a>
                <a href="{{ url_for('record_list', patient_id=visit.patient_id if visit.patient_id else '', visit_id=visit.visit_id) }}" class="btn btn-info btn-sm">View Records</a>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}